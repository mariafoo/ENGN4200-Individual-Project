#!/usr/bin/env python3

from multiprocessing import Pool, Process
import sys
import os
import time

def f(data_window):
    sys.stdout = open(str(os.getpid()) + ".out", "w")
    sys.stderr = open(str(os.getpid()) + ".out", "a")
    print("Child Process #%d" % os.getpid())
    print(data_window)
    return (1,2,3,4)

def g(results):
    print("callback is called")
    print(results)

pool = Pool(processes=1)

data_window = {'x': [348, 349, 349, 348, 349, 347, 350, 349, 346, 349, 351, 351, 350, 350, 350, 350, 348, 349, 349, 350, 349, 350, 351, 348, 348, 347, 345, 349, 350, 345, 348, 350, 348, 344, 347, 351, 350, 350, 347, 346, 350, 349, 349, 349, 348, 350, 349, 353, 349, 349, 347, 350, 348, 351, 346, 349, 349, 349, 349, 351, 349, 348, 348, 348, 350, 349, 350, 350, 350, 349, 348, 350, 348, 348, 351, 348, 349, 347, 349, 350, 348, 349, 348, 352, 349, 348, 347, 347, 349, 352, 350, 346, 348, 351, 348, 348, 350, 350, 349, 350, 349, 349, 351, 347, 350, 350, 349, 351, 349, 350, 349, 349, 348, 348, 349, 351, 350, 348, 350, 349, 349, 349, 347, 348, 349, 350, 349, 349, 350], 'z': [460, 460, 458, 459, 458, 460, 461, 457, 459, 459, 460, 457, 459, 456, 460, 457, 462, 458, 460, 458, 461, 458, 457, 458, 460, 457, 458, 461, 457, 458, 461, 457, 457, 457, 457, 459, 460, 457, 459, 459, 457, 458, 457, 462, 457, 460, 459, 458, 457, 459, 458, 458, 456, 458, 459, 459, 459, 457, 457, 459, 461, 458, 461, 461, 458, 457, 458, 458, 458, 458, 460, 457, 459, 458, 460, 457, 458, 457, 459, 458, 458, 457, 458, 458, 460, 458, 458, 458, 457, 459, 460, 460, 457, 459, 456, 457, 456, 458, 458, 457, 459, 459, 457, 461, 459, 457, 459, 457, 458, 460, 462, 460, 461, 460, 459, 462, 457, 458, 456, 458, 459, 458, 455, 456, 459, 457, 457, 456, 458], 't': [1020, 1051, 1083, 1114, 1144, 1176, 1207, 1239, 1269, 1301, 1332, 1363, 1394, 1426, 1457, 1487, 1519, 1550, 1582, 1612, 1644, 1675, 1707, 1737, 1769, 1800, 1830, 1862, 1893, 1925, 1955, 1987, 2018, 2050, 2080, 2112, 2143, 2173, 2205, 2236, 2268, 2298, 2330, 2361, 2393, 2423, 2455, 2486, 2516, 2548, 2579, 2611, 2641, 2673, 2704, 2736, 2766, 2798, 2829, 2860, 2891, 2922, 2954, 2984, 3016, 3047, 3079, 3109, 3141, 3172, 3203, 3234, 3265, 3297, 3328, 3359, 3390, 3422, 3452, 3484, 3515, 3546, 3577, 3608, 3640, 3671, 3702, 3733, 3765, 3795, 3827, 3858, 3889, 3920, 3951, 3983, 4014, 4045, 4076, 4108, 4139, 4170, 4201, 4232, 4263, 4294, 4326, 4357, 4388, 4419, 4451, 4482, 4513, 4544, 4575, 4606, 4637, 4669, 4700, 4731, 4762, 4794, 4825, 4856, 4887, 4919, 4950, 4980, 5012], 'y': [344, 344, 342, 343, 342, 344, 344, 342, 345, 342, 341, 342, 342, 343, 344, 341, 343, 343, 344, 343, 341, 345, 342, 343, 342, 343, 343, 343, 342, 341, 342, 341, 343, 346, 343, 344, 342, 343, 344, 343, 343, 344, 344, 343, 343, 344, 342, 342, 342, 343, 342, 343, 342, 343, 343, 340, 342, 342, 345, 343, 342, 344, 345, 345, 342, 344, 342, 343, 343, 343, 346, 343, 344, 343, 341, 343, 343, 344, 343, 346, 344, 342, 345, 342, 344, 344, 343, 344, 344, 341, 342, 344, 344, 342, 345, 343, 343, 343, 345, 345, 343, 345, 343, 342, 341, 342, 343, 342, 343, 343, 344, 344, 342, 342, 343, 343, 344, 344, 343, 342, 343, 343, 344, 342, 342, 343, 344, 344, 343]
}

x = pool.apply_async(f, args=(data_window,))
x = pool.apply_async(f, args=(data_window,))
x = pool.apply_async(f, args=(data_window,))
x = pool.apply_async(f, args=(data_window,))
pool.close()

print("THIS IS FIRST")

print("Main Process #%d" % os.getpid())

time.sleep(2)